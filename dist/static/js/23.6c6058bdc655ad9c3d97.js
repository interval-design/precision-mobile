webpackJsonp([23],{HfaK:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADGUExURUxpcePx/9zt/+Lw/+Ty/+Px/+Lw/9nz/+X1/+Lw/+Lx/+Pw/+Tx/+Lw/+Lw/2+x/X66/6LM/OPw/4C7/3Cy/aDM/6DM/6DN/+Tu+eLw//3MmwolRG+x/fy8hZy94uPr9url4idAXP3Hk/fNpVVXXmpmZIaZr6u+0+7dz9Hk+fzBjDtIWH66/vPRspyuwxwzTo299MPT5fHYwr3c//fHmXq092J4kbibgM6lgaSLdnqOpYB3blBogkhfetm0jsvDwLzByuLTyPiB2W8AAAAZdFJOUwBsE+RPkt8HH++10kLF1d1H/p1tlsfmlOxU42CFAAAD2klEQVRYw6WZaZeqMAyGxRFxm3F3DmJFVNxw38fZ7v//VbfgShIgOO8HjwfLc5ImTduYSIQrWVDUXD6d1fVsOp9TlUIy8by0lJrXkfJqSnsKV6hk9QBlK4XYxilpPVRpRYuFe9Ej9cJHptI6S+kUC5fJ6WzlMgzzsnoMZaOM1FQ9ptTQmUy+6rH1GpLqmTf9Cb0FTmQmIFnGw/ngdBrMh+OABMrE4K0GX5Zxk7Wfm2xiEvu7Oj3ALlrsV4TXxDxqKB7DL4PWHrv+imMN82UVhHM9H+LsQfkMBswXRpgGiAgyPAPWx8CI0AmtGX9gcjF5hvENY5MLcXhocDQIdlrz1yvTYgGh2+l7pBX/LyeDKRBs5WYgWCILLtDyL5sXjTZwbrA1oE0EFX/PB1pgFi/7JYiWxQcaIHfOu2vF/9CMwYM+V7yQgEWyigPcg+WiEat4GAf4TSQ3LDPzOECLKDr5WMCF/RkGzMtCrfOBzudh22zaIUA9iZLmEej07X7fcSxHfvn8OEqYJzsEWIDL5B4U53AFIN2JDnxbQTG5Aj+aIfpYBERZRgUdjc55eGiGamuTeeiWWXToHbsD7WaU+vTekk/gs6A78CcSeKQqolsf8OlNzo/TjJY3jWiHzibwMcAxjD4DaFNZo+sIaG77PKC7YuwZBkKXe8LmAQ9ubok1chkEpSPEBw/4I4FCTEwYFJA2MyGOPOBWDhNCdGDa5KDHQixYQBnmgxw8gomtYqDNyGs3tR2BgSosDmvh+nzgAI9HgV1WYPky3UGCw2t23ZFbVL5ggV3HA3ZQgUXVwSV2OcCJTJoO3gJwQTRHozUHOBp1yJNxirgnmNC5Sbc7ARMxo64sKWKjP+c3nq4JmIcRdZfUiKPIeQVGe0zdgCrkYemc4FG8NfVWgTzO8UykDEzTB05yFlGIqXeUgCMxFegmI8S3IzFtot/pri/GPTPMQHStiJxGmvdwrSCTWxIDQj0jef7bHt1aMdfseICrGbo83oyEyN7IDGi4ZMKvt3crO7NbPLpEOQi43hJF5yE4XuVzFdK+YbQIHqMti42r4OaNxmpi3IE9KfkZ2LpJ8ts2m3L7tgp/2+Xx3xo3m2Wr1W63f72EnP2TX1vT8obLg62qTbnlaSk57eHQ/Vx6D6Z+O98yrGbaZtq6auchJW53e7Qcs5pp93bfA+7C3O38T65IVWM0JMfLFtQOPWmVOQ1Jr2W6wS9TwNZ0zGmZSpWKxMsEsFhit52rxWhgsRqrkw2R0z/hzo7XgoG10nN/LpRqRQws1krP/blwSfVS9b1ebzTK5UajXn+vlqL+/vgPSoQJdC5FA0sAAAAASUVORK5CYII="},gzCy:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,'\n.itv-message {\n  padding: 48px 32px;\n  height: 100vh;\n}\n.itv-message-list {\n    height: 700px;\n    margin-bottom: 72px;\n    overflow: scroll;\n}\n.itv-message-list .timestamp {\n      color: #8D99A6;\n      text-align: center;\n      font-size: 20px;\n}\n.itv-message-list .timestamp span {\n        position: relative;\n}\n.itv-message-list .timestamp span:before {\n          position: absolute;\n          content: "";\n          left: -40px;\n          top: 50%;\n          width: 30px;\n          height: 1px;\n          background: #8D99A6;\n}\n.itv-message-list .timestamp span:after {\n          position: absolute;\n          content: "";\n          right: -40px;\n          top: 50%;\n          width: 30px;\n          height: 1px;\n          background: #8D99A6;\n}\n.itv-message-list-item {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      margin: 32px 0;\n}\n.itv-message-list-item .content {\n        position: relative;\n        padding: 24px;\n        max-width: 450px;\n        background: #FAFAFA;\n        color: #8D99A6;\n        border-radius: 2px;\n}\n.itv-message-list-item.user {\n        -webkit-box-pack: start;\n            -ms-flex-pack: start;\n                justify-content: flex-start;\n}\n.itv-message-list-item.user .content {\n          margin-left: 32px;\n}\n.itv-message-list-item.user .content:before {\n            position: absolute;\n            content: "";\n            top: 20px;\n            left: -8px;\n            width: 0;\n            height: 0;\n            border-style: solid;\n            border-width: 10px 10px 10px 0;\n            border-color: transparent #FAFAFA transparent transparent;\n            -webkit-transform: translateY(-50%);\n                    transform: translateY(-50%);\n}\n.itv-message-list-item.admin {\n        -webkit-box-pack: end;\n            -ms-flex-pack: end;\n                justify-content: flex-end;\n}\n.itv-message-list-item.admin .content {\n          margin-right: 32px;\n}\n.itv-message-list-item.admin .content:before {\n            position: absolute;\n            content: "";\n            top: 20px;\n            right: -8px;\n            width: 0;\n            height: 0;\n            border-style: solid;\n            border-width: 10px 0 10px 10px;\n            border-color: transparent transparent transparent #FAFAFA;\n}\n.itv-message .itv-avatar {\n    width: 80px;\n    height: 80px;\n}\n.itv-message .itv-base-input {\n    margin-bottom: 32px;\n    background: #FAFAFA;\n    border: 1px solid #EAEAEA;\n}\n',""])},nRLO:function(t,e,n){"use strict";function s(t){n("xM5i")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("mtWM"),i=n.n(a),r={getMessages:function(t){return i.a.get("/api/current_user/messages/",{params:t})},createdMessage:function(t){return i.a.post("/api/messages/",t)},getOrderMessages:function(t,e){return i.a.get("/api/orders/"+t+"/messages/",{params:e})},createdOrderMessage:function(t,e){return i.a.post("/api/orders/"+t+"/messages/",e)}},o={name:"Message",filters:{timestamp:function(t){var e=new Date,n=function(){var e=new Date(t+"+0800");return"Invalid Date"==e&&(t=t.replace(/T/g," "),t=t.replace(/-/g,"/"),e=new Date(t)),e}(),s=e-n,a=function(t){return(t<10?"0":"")+t},i=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),c=a(n.getHours()),g=a(n.getMinutes()),d=0,l=0,p=0;if(d=Math.floor(s/1e3/3600/24),l=Math.floor(s/1e3/60/60%24),p=Math.floor(s/1e3/60%60),l<1)return p+"分钟前";if(l>=1&&0===d)return l+"小时"+p+"分钟前";if(d>0)switch(d){case 1:return"昨天";case 2:return"前天"}else if(d>2)return i+"-"+r+"-"+o+" "+c+":"+g}},created:function(){if(this.$route.query.order_id)return void this.loadOrderMessages();this.loadMessages()},data:function(){return{messages:[],content:""}},methods:{loadMessages:function(){var t=this;r.getMessages().then(function(e){0===e.data.code&&(t.messages=e.data.data.messages)})},createdMessage:function(){var t=this;r.createdMessage({content:this.content}).then(function(e){0===e.data.code&&(t.content="",t.loadMessages())})},loadOrderMessages:function(){var t=this;r.getOrderMessages(this.$route.query.order_id).then(function(e){0===e.data.code&&(t.messages=e.data.data.messages)})},createdOrderMessage:function(){var t=this;r.createdOrderMessage(this.$route.query.order_id,{content:this.content}).then(function(e){0===e.data.code&&(t.content="",t.loadOrderMessages())})},showTimestamp:function(t){var e=new Date,n=function(){var e=new Date(t+"+0800");return"Invalid Date"==e&&(t=t.replace(/T/g," "),t=t.replace(/-/g,"/"),e=new Date(t)),e}(),s=e-n,a=0;return a=Math.floor(s/1e3/60%60),a>=1?"TRUE":"FALSE"}}},c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"itv-message itv-bg-white"},[n("div",{staticClass:"itv-message-list"},[t._l(t.messages,function(e){return["TRUE"===t.showTimestamp(e.iso_create_time)?n("div",{staticClass:"timestamp"},[n("span",[t._v(t._s(t._f("timestamp")(e.iso_create_time)))])]):t._e(),t._v(" "),e.user?n("div",{staticClass:"itv-message-list-item user"},[n("div",{staticClass:"itv-avatar"},[n("img",{attrs:{src:t.$bus.weixinUser.headimgurl,alt:"avatar"}})]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(e.content))])]):n("div",{staticClass:"itv-message-list-item admin"},[n("p",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),t._m(0,!0,!1)])]})],2),t._v(" "),n("div",{staticClass:"itv-message-input"},[n("base-input",{attrs:{type:"textarea",placeholder:"请输入",rows:"6"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),t.$route.query.order_id?n("base-button",{attrs:{width:"100%"},on:{click:t.createdOrderMessage}},[t._v("提交")]):n("base-button",{attrs:{width:"100%"},on:{click:t.createdMessage}},[t._v("提交")])],1)])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"itv-avatar"},[s("img",{attrs:{src:n("HfaK"),alt:"avatar"}})])}],d={render:c,staticRenderFns:g},l=d,p=n("VU/8"),m=s,u=p(o,l,!1,m,null,null);e.default=u.exports},xM5i:function(t,e,n){var s=n("gzCy");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("307b33ea",s,!0)}});